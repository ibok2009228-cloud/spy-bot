"""
üïµÔ∏è TELEGRAM –ë–û–¢ "–®–ü–ò–û–ù" - –í–´–ë–û–† –ö–ê–¢–ï–ì–û–†–ò–ò –ü–û–¢–û–ú –°–õ–û–ñ–ù–û–°–¢–¨
"""

import asyncio
import random
import logging
from typing import Dict, List, Optional, Tuple
from dataclasses import dataclass, field
from enum import Enum

from aiogram import Bot, Dispatcher, F, types
from aiogram.filters import Command
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton
from aiogram.enums import ParseMode

# ==================== –ù–ê–°–¢–†–û–ô–ö–ò ====================

BOT_TOKEN = "8090010535:AAEsAeC1LtfKzSbvLcRaugca0mNC2I8_Paw"

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger(__name__)

# ==================== –ö–ê–¢–ï–ì–û–†–ò–ò ====================

CATEGORIES = {
    "–µ–¥–∞": "üçî –ï–¥–∞",
    "–∂–∏–≤–æ—Ç–Ω–æ–µ": "üêæ –ñ–∏–≤–æ—Ç–Ω—ã–µ",
    "–º–µ—Å—Ç–æ": "üìç –ú–µ—Å—Ç–∞",
    "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è": "üíº –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏",
    "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç": "üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç",
    "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å": "üéÆ –ë—Ä–∞–≤–ª –°—Ç–∞—Ä—Å",
    "–∫–ª–µ—à —Ä–æ—è–ª—å": "‚öîÔ∏è –ö–ª–µ—à –†–æ—è–ª—å",
    "—Ñ—É—Ç–±–æ–ª": "‚öΩ –§—É—Ç–±–æ–ª",
    "—Å–ø–æ—Ä—Ç": "üèÜ –°–ø–æ—Ä—Ç",
    "—Ç–µ—Ö–Ω–∏–∫–∞": "üì± –¢–µ—Ö–Ω–∏–∫–∞",
    "–º—É–∑—ã–∫–∞": "üéµ –ú—É–∑—ã–∫–∞",
    "–∫–∏–Ω–æ": "üé¨ –ö–∏–Ω–æ",
}

# ==================== –ë–ê–ó–ê –î–ê–ù–ù–´–• ====================

WORDS_DATABASE: Dict[str, Dict[str, List[Tuple[str, str]]]] = {
    "–µ–¥–∞": {
        "easy": [("–ø–∏—Ü—Ü–∞", "–µ–¥–∞"), ("–±—É—Ä–≥–µ—Ä", "–µ–¥–∞"), ("—Å—É—à–∏", "–µ–¥–∞"), ("—à–æ–∫–æ–ª–∞–¥", "–µ–¥–∞"), ("–º–æ—Ä–æ–∂–µ–Ω–æ–µ", "–µ–¥–∞"), ("–∫–æ–ª–∞", "–µ–¥–∞"), ("—á–∏–ø—Å—ã", "–µ–¥–∞"), ("–ø–µ–ª—å–º–µ–Ω–∏", "–µ–¥–∞"), ("–±–ª–∏–Ω—ã", "–µ–¥–∞"), ("–∫–∞—Ä—Ç–æ—à–∫–∞ —Ñ—Ä–∏", "–µ–¥–∞")],
        "medium": [("—Ñ–∞–ª–∞—Ñ–µ–ª—å", "–µ–¥–∞"), ("–≥–∞—Å–ø–∞—á–æ", "–µ–¥–∞"), ("—Ä–∞—Ç–∞—Ç—É–π", "–µ–¥–∞"), ("–ø–∞—ç–ª—å—è", "–µ–¥–∞"), ("–±–æ—Ä—â", "–µ–¥–∞"), ("–ø–ª–æ–≤", "–µ–¥–∞"), ("—Ö–∞—á–∞–ø—É—Ä–∏", "–µ–¥–∞"), ("–¥–æ–ª–º–∞", "–µ–¥–∞"), ("–∫—É—Ç–∞–±", "–µ–¥–∞"), ("—á–∞—Ö–æ—Ö–±–∏–ª–∏", "–µ–¥–∞")],
        "hard": [("—Ñ—É–∞–≥—Ä–∞", "–µ–¥–∞"), ("—ç—Å–∫–∞—Ä–≥–æ", "–µ–¥–∞"), ("–∫—Ä—É–∞—Å—Å–∞–Ω", "–µ–¥–∞"), ("–±–∞–≥–µ—Ç", "–µ–¥–∞"), ("—Ç–∏—Ä–∞–º–∏—Å—É", "–µ–¥–∞"), ("–ø–∞–Ω–∞–∫–æ—Ç–∞", "–µ–¥–∞"), ("–±—Ä–∏–æ—à—å", "–µ–¥–∞"), ("–∫—Ä–µ–º –±—Ä—é–ª–µ", "–µ–¥–∞"), ("–º–∞–∫–∞—Ä–æ–Ω", "–µ–¥–∞"), ("—Ñ–æ–Ω–¥—é", "–µ–¥–∞")]
    },
    "–∂–∏–≤–æ—Ç–Ω–æ–µ": {
        "easy": [("—Å–æ–±–∞–∫–∞", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–∫–æ—à–∫–∞", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("—Å–ª–æ–Ω", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("—Ç–∏–≥—Ä", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–ª–µ–≤", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–º–µ–¥–≤–µ–¥—å", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–∑–∞—è—Ü", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–≤–æ–ª–∫", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–ª–∏—Å–∞", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–æ–±–µ–∑—å—è–Ω–∞", "–∂–∏–≤–æ—Ç–Ω–æ–µ")],
        "medium": [("–µ–Ω–æ—Ç", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–±–∞—Ä—Å—É–∫", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–≤—ã–¥—Ä–∞", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("—Å—É—Ä–∏–∫–∞—Ç", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–ø–∞–Ω–¥–∞", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–∫–æ–∞–ª–∞", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–∫–µ–Ω–≥—É—Ä—É", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–Ω–æ—Å–æ—Ä–æ–≥", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–±–µ–≥–µ–º–æ—Ç", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–∂–∏—Ä–∞—Ñ", "–∂–∏–≤–æ—Ç–Ω–æ–µ")],
        "hard": [("—Ç–∞–ø–∏—Ä", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–∫–∞–ø–∏–±–∞—Ä–∞", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–ø–∞–Ω–≥–æ–ª–∏–Ω", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–æ–∫–∞–ø–∏", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–∞–∫—Å–æ–ª–æ—Ç–ª—å", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–Ω–∞—Ä–≤–∞–ª", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–∫–∞–∫–∞–¥—É", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("—Ç—é–ª–µ–Ω—å", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–¥–µ–ª—å—Ñ–∏–Ω", "–∂–∏–≤–æ—Ç–Ω–æ–µ"), ("–æ—Ä–∫–∞", "–∂–∏–≤–æ—Ç–Ω–æ–µ")]
    },
    "–º–µ—Å—Ç–æ": {
        "easy": [("—à–∫–æ–ª–∞", "–º–µ—Å—Ç–æ"), ("–±–æ–ª—å–Ω–∏—Ü–∞", "–º–µ—Å—Ç–æ"), ("–º–∞–≥–∞–∑–∏–Ω", "–º–µ—Å—Ç–æ"), ("–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä", "–º–µ—Å—Ç–æ"), ("–ø–∞—Ä–∫", "–º–µ—Å—Ç–æ"), ("–ø–ª—è–∂", "–º–µ—Å—Ç–æ"), ("–≥–æ—Ä–æ–¥", "–º–µ—Å—Ç–æ"), ("–¥–µ—Ä–µ–≤–Ω—è", "–º–µ—Å—Ç–æ"), ("—Ä–µ—Å—Ç–æ—Ä–∞–Ω", "–º–µ—Å—Ç–æ"), ("—Å—Ç–∞–¥–∏–æ–Ω", "–º–µ—Å—Ç–æ")],
        "medium": [("–±–∏–±–ª–∏–æ—Ç–µ–∫–∞", "–º–µ—Å—Ç–æ"), ("–º—É–∑–µ–π", "–º–µ—Å—Ç–æ"), ("—Ç–µ–∞—Ç—Ä", "–º–µ—Å—Ç–æ"), ("–∑–æ–æ–ø–∞—Ä–∫", "–º–µ—Å—Ç–æ"), ("–∞–∫–≤–∞–ø–∞—Ä–∫", "–º–µ—Å—Ç–æ"), ("–±–∞—Å—Å–µ–π–Ω", "–º–µ—Å—Ç–æ"), ("—Å–ø–æ—Ä—Ç–∑–∞–ª", "–º–µ—Å—Ç–æ"), ("–ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞", "–º–µ—Å—Ç–æ"), ("—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç", "–º–µ—Å—Ç–æ"), ("–∞—ç—Ä–æ–ø–æ—Ä—Ç", "–º–µ—Å—Ç–æ")],
        "hard": [("–æ–±—Å–µ—Ä–≤–∞—Ç–æ—Ä–∏—è", "–º–µ—Å—Ç–æ"), ("–∫—Ä–µ–º–∞—Ç–æ—Ä–∏–π", "–º–µ—Å—Ç–æ"), ("—Å–∞–Ω–∞—Ç–æ—Ä–∏–π", "–º–µ—Å—Ç–æ"), ("–ø–∞–Ω—Å–∏–æ–Ω–∞—Ç", "–º–µ—Å—Ç–æ"), ("—Ö–æ—Å—Ç–µ–ª", "–º–µ—Å—Ç–æ"), ("–º–æ—Ç–µ–ª—å", "–º–µ—Å—Ç–æ"), ("–≤–æ–∫–∑–∞–ª", "–º–µ—Å—Ç–æ"), ("–ø–æ—Ä—Ç", "–º–µ—Å—Ç–æ"), ("—Ñ—É–Ω–∏–∫—É–ª–µ—Ä", "–º–µ—Å—Ç–æ"), ("–º–æ–Ω–æ—Ä–µ–ª—å—Å", "–º–µ—Å—Ç–æ")]
    },
    "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è": {
        "easy": [("–≤—Ä–∞—á", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("—É—á–∏—Ç–µ–ª—å", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–ø–æ–ª–∏—Ü–µ–π—Å–∫–∏–π", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–ø–æ–≤–∞—Ä", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–≤–æ–¥–∏—Ç–µ–ª—å", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("—Å—Ç—Ä–æ–∏—Ç–µ–ª—å", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("—Ñ—É—Ç–±–æ–ª–∏—Å—Ç", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–ø–µ–≤–µ—Ü", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–∞–∫—Ç–µ—Ä", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–∫–æ—Å–º–æ–Ω–∞–≤—Ç", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è")],
        "medium": [("–∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–¥–∏–∑–∞–π–Ω–µ—Ä", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–∂—É—Ä–Ω–∞–ª–∏—Å—Ç", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("—é—Ä–∏—Å—Ç", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("—ç–∫–æ–Ω–æ–º–∏—Å—Ç", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–ø—Å–∏—Ö–æ–ª–æ–≥", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–±–∏–æ–ª–æ–≥", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è")],
        "hard": [("–∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–¥–∞–∫—Ç–∏–ª–æ—Å–∫–æ–ø–∏—Å—Ç", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("—Å–æ–º–µ–ª—å–µ", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("—Ñ–ª–æ—Ä–∏—Å—Ç", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("—Ä–µ—Å—Ç–∞–≤—Ä–∞—Ç–æ—Ä", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–æ—Ä", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–∞—Ä—Ö–∏–≤–∞—Ä–∏—É—Å", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è"), ("–±–∏–±–ª–∏–æ–≥—Ä–∞—Ñ", "–ø—Ä–æ—Ñ–µ—Å—Å–∏—è")]
    },
    "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç": {
        "easy": [("–º–∞—à–∏–Ω–∞", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("—Å–∞–º–æ–ª–µ—Ç", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–ø–æ–µ–∑–¥", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–≤–µ–ª–æ—Å–∏–ø–µ–¥", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–∞–≤—Ç–æ–±—É—Å", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–∫–æ—Ä–∞–±–ª—å", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–º–æ—Ç–æ—Ü–∏–∫–ª", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–≤–µ—Ä—Ç–æ–ª–µ—Ç", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–º–µ—Ç—Ä–æ", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("—Ç—Ä–∞–º–≤–∞–π", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç")],
        "medium": [("—Ç—Ä–æ–ª–ª–µ–π–±—É—Å", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("—Ç–∞–∫—Å–∏", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–≥—Ä—É–∑–æ–≤–∏–∫", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("—Ñ—É—Ä–∞", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–∫–∞—Ç–µ—Ä", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("—è—Ö—Ç–∞", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–ø–∞—Ä–æ–º", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–≥–æ–Ω–¥–æ–ª–∞", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("—Å–Ω–µ–≥–æ—Ö–æ–¥", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–∞–º—Ñ–∏–±–∏—è", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç")],
        "hard": [("–¥–∏—Ä–∏–∂–∞–±–ª—å", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–∞—ç—Ä–æ—Å—Ç–∞—Ç", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–ø–ª–∞–Ω–µ—Ä", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–¥–µ–ª—å—Ç–∞–ø–ª–∞–Ω", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–ø–∞—Ä–∞–ø–ª–∞–Ω", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–±–∞–≥–≥–∏", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("hovercraft", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("—Å–µ–≥–≤–µ–π", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–º–æ–Ω–æ–∫–æ–ª–µ—Å–æ", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), ("–≥–∏—Ä–æ—Å–∫—É—Ç–µ—Ä", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç")]
    },
    "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å": {
        "easy": [("—à–µ–ª–ª–∏", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–∫–æ–ª—å—Ç", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–±—É–ª–ª", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–¥–∂–µ—Å—Å–∏", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–±—Ä–æ–∫", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–Ω–∏—Ç–∞", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–¥–∏–Ω–∞–º–∞–π–∫", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("—ç–ª—å –ø—Ä–∏–º–æ", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–ª–µ–æ–Ω", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("—Å–ø–∞–π–∫", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å")],
        "medium": [("—Ä–∏–∫–æ", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–±–∞—Ä–ª–∏", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–ø–æ–∫–æ", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–±–æ", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("—Ç–∏–∫", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–¥—ç—Ä—Ä–∏–ª", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–ø–µ–Ω–Ω–∏", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–∫–∞—Ä–ª", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("—Ñ—Ä—ç–Ω–∫", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–º–æ—Ä—Ç–∏—Å", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("—Ç–∞—Ä–∞", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–¥–∂–∏–Ω", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–º–∞–∫—Å", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–±–∏–±–∏", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–±–µ–∑–∑—É–±–∏–∫", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å")],
        "hard": [("–º–∏—Å—Ç–µ—Ä –ø–∏", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–≤–æ–ª—å—Ç", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–∫–ª–µ–æ", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("—Ñ—ç–Ω–≥", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–±–∞–∑–∑", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–≥—Ä–∏—Ñ—Ñ", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–≥–∞–≤—Å", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–±–æ–Ω–Ω–∏", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–¥–∂–∞–Ω–µ—Ç", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–æ—Ç–∏—Å", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("—Å—ç–º", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–±—É—Å—Ç–µ—Ä", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–º—ç–π—Å–∏", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("—Ö—ç–Ω–∫", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–∫–æ—Ä–¥–µ–ª–∏—É—Å", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–¥—É–±–ª–æ–Ω", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–ø–∞–π–ø–µ—Ä", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("–ø—ç–º", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("8 –±–∏—Ç", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å"), ("—ç–º–∑", "–±—Ä–∞–≤–ª —Å—Ç–∞—Ä—Å")]
    },
    "–∫–ª–µ—à —Ä–æ—è–ª—å": {
        "easy": [("—Ä—ã—Ü–∞—Ä—å", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–≥–∏–≥–∞–Ω—Ç", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–º–∏–Ω–∏–ø–µ–∫–∞", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–≤–∞–ª—å—Ç–∏—Ä", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("—Ö–æ–≥", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–º–µ–≥–∞—Ä—ã—Ü–∞—Ä—å", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–¥—Ä–∞–∫–æ–Ω", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–≥–æ–±–ª–∏–Ω", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("—à–∫–µ–ª–µ—Ç", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–≤–æ–∑–¥—É—à–Ω—ã–π —à–∞—Ä", "–∫–ª–µ—à —Ä–æ—è–ª—å")],
        "medium": [("–ø–µ–∫–∫–∞", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–ø—Ä–∏–Ω—Ü", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–ø—Ä–∏–Ω—Ü–µ—Å—Å–∞", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–∫–æ–ª–¥—É–Ω—å—è", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("—ç–ª–µ–∫—Ç—Ä–æ–¥—Ä–∞–∫–æ–Ω", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–∏–Ω—Ñ–µ—Ä–Ω–æ –¥—Ä–∞–∫–æ–Ω", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–ª–∞–≤–∞ —Ö–∞—É–Ω–¥", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–≥—Ä–∞–ª—å–Ω—ã–π –≥–æ–ª–µ–º", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–∫–∞–º–µ–Ω–Ω—ã–π –≥–æ–ª–µ–º", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–±–∞–Ω–¥–∏—Ç–∫–∞", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–Ω–æ—á–Ω–∞—è –≤–µ–¥—å–º–∞", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("—ç–ª–µ–∫—Ç—Ä–æ–≤–∏–∑–∞—Ä–¥", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–ª–µ–¥—è–Ω–æ–π –≤–∏–∑–∞—Ä–¥", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("—Ç–µ—Å–ª–∞", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–º–æ—Ä—Ç–∏—Ä", "–∫–ª–µ—à —Ä–æ—è–ª—å")],
        "hard": [("—Ä—ã–±–∞–∫", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("—Å–∫–µ–ª–µ—Ç –¥—Ä–∞–∫–æ–Ω", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("—ç–ª–µ–∫—Ç—Ä–æ–≥–∏–≥–∞–Ω—Ç", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–∫–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –≥–∏–≥–∞–Ω—Ç", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("—Ç–µ–º–Ω—ã–π –ø—Ä–∏–Ω—Ü", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–æ—Ö–æ—Ç–Ω–∏—Ü–∞", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–ø–∞–ª–∞—á", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–∫–ª–æ–Ω", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–∑–µ—Ä–∫–∞–ª–æ", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–ø—É—à–∫–∞", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("—Ä–∞–∫–µ—Ç–Ω–∏—Ü–∞", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–±–æ—á–∫–∞ —Å –≥–æ–±–ª–∏–Ω–∞–º–∏", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–æ–≥–Ω–µ–Ω–Ω—ã–π –¥—É—Ö", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–ª–µ–¥—è–Ω–æ–π –¥—É—Ö", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("—ç–ª–µ–∫—Ç—Ä–æ–¥—É—Ö–∏", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–¥—Ä–æ–≤–æ—Å–µ–∫", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–∫–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π —Å–≤–∏–Ω", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("—Ç—Ä–∏ –º—É—à–∫–µ—Ç–µ—Ä–∞", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–≥–æ–±–ª–∏–Ω—Å–∫–∞—è –±–æ—á–∫–∞", "–∫–ª–µ—à —Ä–æ—è–ª—å"), ("–≥–∏–≥–∞–Ω—Ç—Å–∫–∏–π —Å–∫–µ–ª–µ—Ç", "–∫–ª–µ—à —Ä–æ—è–ª—å")]
    },
    "—Ñ—É—Ç–±–æ–ª": {
        "easy": [("—Ä–æ–Ω–∞–ª–¥—É", "—Ñ—É—Ç–±–æ–ª"), ("–º–µ—Å—Å–∏", "—Ñ—É—Ç–±–æ–ª"), ("–Ω–µ–π–º–∞—Ä", "—Ñ—É—Ç–±–æ–ª"), ("–∑–∏–¥–∞–Ω", "—Ñ—É—Ç–±–æ–ª"), ("–º–±–∞–ø–ø–µ", "—Ñ—É—Ç–±–æ–ª"), ("–±–µ–∫—Ö—ç–º", "—Ñ—É—Ç–±–æ–ª"), ("—Ä–æ–Ω–∞–ª–¥–∏–Ω—å–æ", "—Ñ—É—Ç–±–æ–ª"), ("—Ä–æoney", "—Ñ—É—Ç–±–æ–ª"), ("—Ç–æ—Ç—Ç–∏", "—Ñ—É—Ç–±–æ–ª"), ("–∫–∞–Ω–Ω–∞–≤–∞—Ä–æ", "—Ñ—É—Ç–±–æ–ª")],
        "medium": [("–±–µ–Ω–∑–µ–º–∞", "—Ñ—É—Ç–±–æ–ª"), ("—Å—É–∞—Ä–µ—Å", "—Ñ—É—Ç–±–æ–ª"), ("–ª–µ–≤–∞–Ω–¥–æ–≤—Å–∫–∏", "—Ñ—É—Ç–±–æ–ª"), ("—Ö–æ–ª–∞–Ω–¥", "—Ñ—É—Ç–±–æ–ª"), ("–≥—Ä–∏–∑–º–∞–Ω–Ω", "—Ñ—É—Ç–±–æ–ª"), ("–∫—Ä–æ–æ—Å", "—Ñ—É—Ç–±–æ–ª"), ("–º–æ–¥—Ä–∏—á", "—Ñ—É—Ç–±–æ–ª"), ("–ø–æ–≥–±–∞", "—Ñ—É—Ç–±–æ–ª"), ("–¥–µ –±—Ä—é–π–Ω–µ", "—Ñ—É—Ç–±–æ–ª"), ("–∏–±—Ä–∞–≥–∏–º–æ–≤–∏—á", "—Ñ—É—Ç–±–æ–ª"), ("—Å–∞–ª–∞—Ö", "—Ñ—É—Ç–±–æ–ª"), ("–º–∞–Ω–µ", "—Ñ—É—Ç–±–æ–ª"), ("–æ–±–∞–º–µ—è–Ω–≥", "—Ñ—É—Ç–±–æ–ª"), ("–∞–∑–∞—Ä", "—Ñ—É—Ç–±–æ–ª"), ("–∫–∞—Å–∏–ª—å—è—Å", "—Ñ—É—Ç–±–æ–ª")],
        "hard": [("–º–∞—Ä–∞–¥–æ–Ω–∞", "—Ñ—É—Ç–±–æ–ª"), ("–ø–µ–ª–µ", "—Ñ—É—Ç–±–æ–ª"), ("–∫—Ä—É–∏—Ñ—Ñ", "—Ñ—É—Ç–±–æ–ª"), ("–ø–ª–∞—Ç–∏–Ω–∏", "—Ñ—É—Ç–±–æ–ª"), ("–±–µ—Å—Ç", "—Ñ—É—Ç–±–æ–ª"), ("—á–∞—Ä–ª—å—Ç–æ–Ω", "—Ñ—É—Ç–±–æ–ª"), ("—ç–π—Å–µ–±–∏–æ", "—Ñ—É—Ç–±–æ–ª"), ("–ø—É—à–∫–∞—à", "—Ñ—É—Ç–±–æ–ª"), ("–≥–µ—Ä–¥ –º—é–ª–ª–µ—Ä", "—Ñ—É—Ç–±–æ–ª"), ("–±–æ–±–±–∏ –º—É—Ä", "—Ñ—É—Ç–±–æ–ª"), ("–π–æ—Ö–∞–Ω –∫—Ä–æ–π—Ñ", "—Ñ—É—Ç–±–æ–ª"), ("—Ñ—Ä–∞–Ω—Ü –±–µ–∫–∫–µ–Ω–±–∞—É—ç—Ä", "—Ñ—É—Ç–±–æ–ª"), ("–º–∞—Ä–∫–æ –≤–∞–Ω –±–∞—Å—Ç–µ–Ω", "—Ñ—É—Ç–±–æ–ª"), ("—Ä—É–¥ –≥—É–ª–ª–∏—Ç", "—Ñ—É—Ç–±–æ–ª"), ("—Ä–æ–±–µ—Ä—Ç–æ –±–∞–¥–∂–æ", "—Ñ—É—Ç–±–æ–ª"), ("–ø–∞–æ–ª–æ –º–∞–ª—å–¥–∏–Ω–∏", "—Ñ—É—Ç–±–æ–ª"), ("–∞–ª–µ—Å—Å–∞–Ω–¥—Ä–æ –¥–µ–ª—å –ø—å–µ—Ä–æ", "—Ñ—É—Ç–±–æ–ª"), ("–≥–∞–±—Ä–∏—ç–ª—å –±–∞—Ç–∏—Å—Ç—É—Ç–∞", "—Ñ—É—Ç–±–æ–ª"), ("—Ä–æ–º–∞—Ä–∏–æ", "—Ñ—É—Ç–±–æ–ª"), ("–∫–∞—Ä–ª–æ—Å –∞–ª—å–±–µ—Ä—Ç–æ", "—Ñ—É—Ç–±–æ–ª")]
    },
    "—Å–ø–æ—Ä—Ç": {
        "easy": [("—Ñ—É—Ç–±–æ–ª", "—Å–ø–æ—Ä—Ç"), ("–±–∞—Å–∫–µ—Ç–±–æ–ª", "—Å–ø–æ—Ä—Ç"), ("—Ç–µ–Ω–Ω–∏—Å", "—Å–ø–æ—Ä—Ç"), ("–≤–æ–ª–µ–π–±–æ–ª", "—Å–ø–æ—Ä—Ç"), ("–ø–ª–∞–≤–∞–Ω–∏–µ", "—Å–ø–æ—Ä—Ç"), ("–±–æ–∫—Å", "—Å–ø–æ—Ä—Ç"), ("—Ö–æ–∫–∫–µ–π", "—Å–ø–æ—Ä—Ç"), ("–≥–∏–º–Ω–∞—Å—Ç–∏–∫–∞", "—Å–ø–æ—Ä—Ç"), ("–ª–µ–≥–∫–∞—è –∞—Ç–ª–µ—Ç–∏–∫–∞", "—Å–ø–æ—Ä—Ç"), ("—à–∞—Ö–º–∞—Ç—ã", "—Å–ø–æ—Ä—Ç")],
        "medium": [("–±–µ–π—Å–±–æ–ª", "—Å–ø–æ—Ä—Ç"), ("–∫—Ä–∏–∫–µ—Ç", "—Å–ø–æ—Ä—Ç"), ("—Ä–µ–≥–±–∏", "—Å–ø–æ—Ä—Ç"), ("–≥–æ–ª—å—Ñ", "—Å–ø–æ—Ä—Ç"), ("—Å–µ—Ä—Ñ–∏–Ω–≥", "—Å–ø–æ—Ä—Ç"), ("—Å–∫–µ–π—Ç–±–æ—Ä–¥–∏–Ω–≥", "—Å–ø–æ—Ä—Ç"), ("—Å–Ω–æ—É–±–æ—Ä–¥", "—Å–ø–æ—Ä—Ç"), ("–∫–∞—Ç–∞–Ω–∏–µ –Ω–∞ –ª—ã–∂–∞—Ö", "—Å–ø–æ—Ä—Ç"), ("–ø—Ä—ã–∂–∫–∏ –≤ –≤–æ–¥—É", "—Å–ø–æ—Ä—Ç"), ("–≤–µ–ª–æ—Å–ø–æ—Ä—Ç", "—Å–ø–æ—Ä—Ç"), ("–±–æ—Ä—å–±–∞", "—Å–ø–æ—Ä—Ç"), ("–¥–∑—é–¥–æ", "—Å–ø–æ—Ä—Ç"), ("–∫–∞—Ä–∞—Ç—ç", "—Å–ø–æ—Ä—Ç"), ("—Ç—Ö—ç–∫–≤–æ–Ω–¥–æ", "—Å–ø–æ—Ä—Ç"), ("—Ñ–µ—Ö—Ç–æ–≤–∞–Ω–∏–µ", "—Å–ø–æ—Ä—Ç")],
        "hard": [("–∫–µ—Ä–ª–∏–Ω–≥", "—Å–ø–æ—Ä—Ç"), ("–ø–æ–ª–æ", "—Å–ø–æ—Ä—Ç"), ("—Å–∞–º–±–æ", "—Å–ø–æ—Ä—Ç"), ("–≤–æ–¥–Ω–æ–µ –ø–æ–ª–æ", "—Å–ø–æ—Ä—Ç"), ("–≥–∞–Ω–¥–±–æ–ª", "—Å–ø–æ—Ä—Ç"), ("–ª–∞–∫—Ä–æ—Å—Å", "—Å–ø–æ—Ä—Ç"), ("—Å–æ—Ñ—Ç–±–æ–ª", "—Å–ø–æ—Ä—Ç"), ("–±–∞–¥–º–∏–Ω—Ç–æ–Ω", "—Å–ø–æ—Ä—Ç"), ("–Ω–∞—Å—Ç–æ–ª—å–Ω—ã–π —Ç–µ–Ω–Ω–∏—Å", "—Å–ø–æ—Ä—Ç"), ("—Å–∫–≤–æ—à", "—Å–ø–æ—Ä—Ç"), ("—Ç—Ä–∏–∞—Ç–ª–æ–Ω", "—Å–ø–æ—Ä—Ç"), ("–±–∏–∞—Ç–ª–æ–Ω", "—Å–ø–æ—Ä—Ç"), ("—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–ª–∞–≤–∞–Ω–∏–µ", "—Å–ø–æ—Ä—Ç"), ("—Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –≥–∏–º–Ω–∞—Å—Ç–∏–∫–∞", "—Å–ø–æ—Ä—Ç"), ("—Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –≥–∏–º–Ω–∞—Å—Ç–∏–∫–∞", "—Å–ø–æ—Ä—Ç"), ("–∞–∫—Ä–æ–±–∞—Ç–∏–∫–∞", "—Å–ø–æ—Ä—Ç"), ("–ø–∞—Ä–∫—É—Ä", "—Å–ø–æ—Ä—Ç"), ("—Ñ—Ä–∏—Ä–∞–Ω", "—Å–ø–æ—Ä—Ç"), ("–±–µ–π—Å–¥–∂–∞–º–ø–∏–Ω–≥", "—Å–ø–æ—Ä—Ç"), ("–∫–∞–π—Ç—Å–µ—Ä—Ñ–∏–Ω–≥", "—Å–ø–æ—Ä—Ç")]
    },
    "—Ç–µ—Ö–Ω–∏–∫–∞": {
        "easy": [("—Ç–µ–ª–µ—Ñ–æ–Ω", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–∫–æ–º–ø—å—é—Ç–µ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Ç–µ–ª–µ–≤–∏–∑–æ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–ø—ã–ª–µ—Å–æ—Å", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫–∞", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—É—Ç—é–≥", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Ñ–µ–Ω", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—á–∞–π–Ω–∏–∫", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Ç–æ—Å—Ç–µ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞")],
        "medium": [("–ø–ª–∞–Ω—à–µ—Ç", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–Ω–æ—É—Ç–±—É–∫", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–∫–∞–º–µ—Ä–∞", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–ø—Ä–∏–Ω—Ç–µ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Å–∫–∞–Ω–µ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Ä–æ—É—Ç–µ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–∫–æ–ª–æ–Ω–∫–∞", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–Ω–∞—É—à–Ω–∏–∫–∏", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–ø–∞—É—ç—Ä–±–∞–Ω–∫", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Å–º–∞—Ä—Ç-—á–∞—Å—ã", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Ñ–∏—Ç–Ω–µ—Å-–±—Ä–∞—Å–ª–µ—Ç", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—ç–ª–µ–∫—Ç—Ä–æ—Å–∞–º–æ–∫–∞—Ç", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–≥–∏—Ä–æ—Å–∫—É—Ç–µ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–∫–≤–∞–¥—Ä–æ–∫–æ–ø—Ç–µ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—ç–∫—à–Ω-–∫–∞–º–µ—Ä–∞", "—Ç–µ—Ö–Ω–∏–∫–∞")],
        "hard": [("3d –ø—Ä–∏–Ω—Ç–µ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("vr –æ—á–∫–∏", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–¥—Ä–æ–Ω", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Ä–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—É–º–Ω—ã–π –¥–æ–º", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–≥–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–∞—è –∑–∞—Ä—è–¥–∫–∞", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Å–º–∞—Ä—Ç-–∑–µ—Ä–∫–∞–ª–æ", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∫–Ω–∏–≥–∞", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–µ–∫—Ç–æ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Å—Ç–µ–¥–∏–∫–∞–º", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–¥–∏–∫—Ç–æ—Ñ–æ–Ω", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–º–µ—Ç–∞–ª–ª–æ–∏—Å–∫–∞—Ç–µ–ª—å", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Ç–µ–ø–ª–æ–≤–∏–∑–æ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—ç–Ω–¥–æ—Å–∫–æ–ø", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–∫–≤–∞–¥—Ä–æ–∫–æ–ø—Ç–µ—Ä —Å –∫–∞–º–µ—Ä–æ–π", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—Å–º–∞—Ä—Ç-–æ—á–∫–∏", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("—ç–∫–∑–æ—Å–∫–µ–ª–µ—Ç", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–Ω–µ–π—Ä–æ–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å", "—Ç–µ—Ö–Ω–∏–∫–∞"), ("–∫–≤–∞–Ω—Ç–æ–≤—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞")]
    },
    "–º—É–∑—ã–∫–∞": {
        "easy": [("–≥–∏—Ç–∞—Ä–∞", "–º—É–∑—ã–∫–∞"), ("–ø–∏–∞–Ω–∏–Ω–æ", "–º—É–∑—ã–∫–∞"), ("–±–∞—Ä–∞–±–∞–Ω—ã", "–º—É–∑—ã–∫–∞"), ("—Å–∫—Ä–∏–ø–∫–∞", "–º—É–∑—ã–∫–∞"), ("—Ä–æ—è–ª—å", "–º—É–∑—ã–∫–∞"), ("–≥—É–±–Ω–∞—è –≥–∞—Ä–º–æ—à–∫–∞", "–º—É–∑—ã–∫–∞"), ("—Ñ–ª–µ–π—Ç–∞", "–º—É–∑—ã–∫–∞"), ("—Å–∞–∫—Å–æ—Ñ–æ–Ω", "–º—É–∑—ã–∫–∞"), ("—Ç—Ä—É–±–∞", "–º—É–∑—ã–∫–∞"), ("–±–∞—è–Ω", "–º—É–∑—ã–∫–∞")],
        "medium": [("–∞—Ä—Ñ–∞", "–º—É–∑—ã–∫–∞"), ("–∫–ª–∞—Ä–Ω–µ—Ç", "–º—É–∑—ã–∫–∞"), ("–±–∞—Å-–≥–∏—Ç–∞—Ä–∞", "–º—É–∑—ã–∫–∞"), ("—Å–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä", "–º—É–∑—ã–∫–∞"), ("–º–∏–∫—à–µ—Ä", "–º—É–∑—ã–∫–∞"), ("–∫–æ–ª–æ–Ω–∫–∏", "–º—É–∑—ã–∫–∞"), ("–º–∏–∫—Ä–æ—Ñ–æ–Ω", "–º—É–∑—ã–∫–∞"), ("–Ω–∞—É—à–Ω–∏–∫–∏", "–º—É–∑—ã–∫–∞"), ("–≤–∏–Ω–∏–ª–æ–≤—ã–π –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç–µ–ª—å", "–º—É–∑—ã–∫–∞"), ("–º–µ—Ç—Ä–æ–Ω–æ–º", "–º—É–∑—ã–∫–∞"), ("–∫–∞–ø–æ–¥–∞—Å—Ç—Ä", "–º—É–∑—ã–∫–∞"), ("–º–µ–¥–∏–∞—Ç–æ—Ä", "–º—É–∑—ã–∫–∞"), ("—Å–º—ã—á–æ–∫", "–º—É–∑—ã–∫–∞"), ("–∫–ª–∞–≤–∏—à–Ω—ã–µ", "–º—É–∑—ã–∫–∞"), ("–ø–µ—Ä–∫—É—Å—Å–∏—è", "–º—É–∑—ã–∫–∞")],
        "hard": [("—Ç—Ä–æ–º–±–æ–Ω", "–º—É–∑—ã–∫–∞"), ("–≤–∞–ª—Ç–æ—Ä–Ω–∞", "–º—É–∑—ã–∫–∞"), ("—Ñ–∞–≥–æ—Ç", "–º—É–∑—ã–∫–∞"), ("–∫–æ–Ω—Ç—Ä–∞–±–∞—Å", "–º—É–∑—ã–∫–∞"), ("–≤–∏–æ–ª–æ–Ω—á–µ–ª—å", "–º—É–∑—ã–∫–∞"), ("–∞–ª—å—Ç", "–º—É–∑—ã–∫–∞"), ("–∫–æ–Ω—Ç—Ä–∞–±–∞—Å", "–º—É–∑—ã–∫–∞"), ("–ª–∏—Ç–∞–≤—Ä—ã", "–º—É–∑—ã–∫–∞"), ("–∫—Å–∏–ª–æ—Ñ–æ–Ω", "–º—É–∑—ã–∫–∞"), ("–≤–∏–±—Ä–∞—Ñ–æ–Ω", "–º—É–∑—ã–∫–∞"), ("–º–∞—Ä–∏–º–±–∞", "–º—É–∑—ã–∫–∞"), ("–±–∞–Ω–¥–∂–æ", "–º—É–∑—ã–∫–∞"), ("–º–∞–Ω–¥–æ–ª–∏–Ω–∞", "–º—É–∑—ã–∫–∞"), ("–±–∞–ª–∞–ª–∞–π–∫–∞", "–º—É–∑—ã–∫–∞"), ("–¥–æ–º—Ä–∞", "–º—É–∑—ã–∫–∞"), ("–≥—É—Å–ª–∏", "–º—É–∑—ã–∫–∞"), ("—Åitar", "–º—É–∑—ã–∫–∞"), ("—É–¥", "–º—É–∑—ã–∫–∞"), ("–∫–∞–º–∞–Ω—á–µ", "–º—É–∑—ã–∫–∞"), ("—Ç–∞—Ä", "–º—É–∑—ã–∫–∞")]
    },
    "–∫–∏–Ω–æ": {
        "easy": [("–∞–≤–∞—Ç–∞—Ä", "–∫–∏–Ω–æ"), ("—Ç–∏—Ç–∞–Ω–∏–∫", "–∫–∏–Ω–æ"), ("—Ñ–æ—Ä—Å–∞–∂", "–∫–∏–Ω–æ"), ("–º—Å—Ç–∏—Ç–µ–ª–∏", "–∫–∏–Ω–æ"), ("–≥–∞—Ä—Ä–∏ –ø–æ—Ç—Ç–µ—Ä", "–∫–∏–Ω–æ"), ("–≤–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü", "–∫–∏–Ω–æ"), ("–∑–≤–µ–∑–¥–Ω—ã–µ –≤–æ–π–Ω—ã", "–∫–∏–Ω–æ"), ("—Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä", "–∫–∏–Ω–æ"), ("–º–∞—Ç—Ä–∏—Ü–∞", "–∫–∏–Ω–æ"), ("–ø–∏—Ä–∞—Ç—ã –∫–∞—Ä–∏–±—Å–∫–æ–≥–æ –º–æ—Ä—è", "–∫–∏–Ω–æ")],
        "medium": [("–Ω–∞—á–∞–ª–æ", "–∫–∏–Ω–æ"), ("–∏–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä", "–∫–∏–Ω–æ"), ("–¥—é–Ω–∫–µ—Ä–∫", "–∫–∏–Ω–æ"), ("—Ç–µ–º–Ω—ã–π —Ä—ã—Ü–∞—Ä—å", "–∫–∏–Ω–æ"), ("–±—ç—Ç–º–µ–Ω", "–∫–∏–Ω–æ"), ("–∂–µ–ª–µ–∑–Ω—ã–π —á–µ–ª–æ–≤–µ–∫", "–∫–∏–Ω–æ"), ("—Ç–æ—Ä", "–∫–∏–Ω–æ"), ("–∫–∞–ø–∏—Ç–∞–Ω –∞–º–µ—Ä–∏–∫–∞", "–∫–∏–Ω–æ"), ("—á–µ—Ä–Ω–∞—è –ø–∞–Ω—Ç–µ—Ä–∞", "–∫–∏–Ω–æ"), ("–¥–æ–∫—Ç–æ—Ä —Å—Ç—Ä—ç–Ω–¥–∂", "–∫–∏–Ω–æ"), ("—á–µ–ª–æ–≤–µ–∫-–ø–∞—É–∫", "–∫–∏–Ω–æ"), ("–ª—é–¥–∏ –∏–∫—Å", "–∫–∏–Ω–æ"), ("–¥—ç–¥–ø—É–ª", "–∫–∏–Ω–æ"), ("–ª–æ–≥–∞–Ω", "–∫–∏–Ω–æ"), ("–≤–µ–Ω–æ–º", "–∫–∏–Ω–æ")],
        "hard": [("–∫–∞—Å–∞–±–ª–∞–Ω–∫–∞", "–∫–∏–Ω–æ"), ("–≥—Ä–∞–∂–¥–∞–Ω–∏–Ω –∫–µ–π–Ω", "–∫–∏–Ω–æ"), ("–∫—Ä–µ—Å—Ç–Ω—ã–π –æ—Ç–µ—Ü", "–∫–∏–Ω–æ"), ("–∞–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å —Å–µ–≥–æ–¥–Ω—è", "–∫–∏–Ω–æ"), ("–ø—Ä–æ–ª–µ—Ç–∞—è –Ω–∞–¥ –≥–Ω–µ–∑–¥–æ–º –∫—É–∫—É—à–∫–∏", "–∫–∏–Ω–æ"), ("—Å–∏—è–Ω–∏–µ", "–∫–∏–Ω–æ"), ("—á–µ–ª—é—Å—Ç–∏", "–∫–∏–Ω–æ"), ("–±–µ—à–µ–Ω—ã–π –±—ã–∫", "–∫–∏–Ω–æ"), ("—Ç–∞–∫—Å–∏—Å—Ç", "–∫–∏–Ω–æ"), ("—Ä–æ–∫–∫–∏", "–∫–∏–Ω–æ"), ("–∫–∞—Ä–Ω–∞–≤–∞–ª –¥—É—à", "–∫–∏–Ω–æ"), ("–Ω–æ—à—å –∂–∏–≤—ã—Ö –º–µ—Ä—Ç–≤–µ—Ü–æ–≤", "–∫–∏–Ω–æ"), ("—Ä–æ–∑–æ–≤–∞—è –ø–∞–Ω—Ç–µ—Ä–∞", "–∫–∏–Ω–æ"), ("–∑–∞–≤–æ–¥–Ω–æ–π –∞–ø–µ–ª—å—Å–∏–Ω", "–∫–∏–Ω–æ"), ("—á–µ–ª–æ–≤–µ–∫ —Å –±—É–ª—å–≤–∞—Ä–∞ –∫–∞–ø—É—Ü–∏–Ω–æ–≤", "–∫–∏–Ω–æ"), ("–±—Ä–æ–Ω–µ–Ω–æ—Å–µ—Ü –ø–æ—Ç–µ–º–∫–∏–Ω", "–∫–∏–Ω–æ"), ("–º–µ—Ç—Ä–æ–ø–æ–ª–∏—Å", "–∫–∏–Ω–æ"), ("–Ω–∏–Ω–æ—á–∫–∞", "–∫–∏–Ω–æ"), ("–≥—Ä–∞—Ñ –º–æ–Ω—Ç–µ-–∫—Ä–∏—Å—Ç–æ", "–∫–∏–Ω–æ"), ("—Ç—Ä–∏ –º—É—à–∫–µ—Ç–µ—Ä–∞", "–∫–∏–Ω–æ")]
    }
}

# ==================== –ö–õ–ê–°–°–´ ====================

class GameState(Enum):
    WAITING = "waiting"
    SELECTING_CATEGORY = "selecting_category"  # –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    SELECTING_DIFFICULTY = "selecting_difficulty"  # –í—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
    SHOWING_WORDS = "showing_words"
    PLAYING = "playing"
    VOTING = "voting"
    SPY_GUESS = "spy_guess"
    FINISHED = "finished"

@dataclass
class Player:
    user_id: int
    username: str
    full_name: str
    is_spy: bool = False
    word: Optional[str] = None
    category: Optional[str] = None
    description: Optional[str] = None
    votes_received: int = 0
    has_voted: bool = False
    voted_for: Optional[int] = None

@dataclass
class GameRoom:
    chat_id: int
    host_id: int
    host_name: str = ""
    state: GameState = GameState.WAITING
    players: Dict[int, Player] = field(default_factory=dict)
    spy_id: Optional[int] = None
    secret_word: Optional[str] = None
    secret_category: Optional[str] = None
    selected_category: Optional[str] = None  # –í—ã–±—Ä–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
    difficulty: str = "medium"
    turn_order: List[int] = field(default_factory=list)
    current_player_index: int = 0
    votes: Dict[int, int] = field(default_factory=dict)
    descriptions_done: List[int] = field(default_factory=list)

# ==================== –ú–ï–ù–ï–î–ñ–ï–† ====================

class GameManager:
    def __init__(self):
        self.games: Dict[int, GameRoom] = {}
        self.user_games: Dict[int, int] = {}
    
    def create_game(self, chat_id: int, host_id: int, host_name: str, username: str) -> GameRoom:
        game = GameRoom(chat_id=chat_id, host_id=host_id, host_name=host_name)
        game.players[host_id] = Player(
            user_id=host_id,
            username=username,
            full_name=host_name
        )
        self.games[chat_id] = game
        self.user_games[host_id] = chat_id
        return game
    
    def join_game(self, chat_id: int, user_id: int, full_name: str, username: str) -> bool:
        if chat_id not in self.games:
            return False
        game = self.games[chat_id]
        if game.state != GameState.WAITING:
            return False
        if user_id in game.players:
            return False
        
        game.players[user_id] = Player(
            user_id=user_id,
            username=username,
            full_name=full_name
        )
        self.user_games[user_id] = chat_id
        return True
    
    def leave_game(self, chat_id: int, user_id: int) -> bool:
        if chat_id not in self.games:
            return False
        game = self.games[chat_id]
        if user_id not in game.players:
            return False
        
        del game.players[user_id]
        del self.user_games[user_id]
        
        if user_id == game.host_id:
            if game.players:
                new_host = next(iter(game.players.keys()))
                game.host_id = new_host
                game.host_name = game.players[new_host].full_name
            else:
                del self.games[chat_id]
                return True
        return True
    
    def start_game(self, chat_id: int) -> Optional[GameRoom]:
        game = self.games.get(chat_id)
        if not game or len(game.players) < 3:
            return None
        
        # –ë–µ—Ä—ë–º —Å–ª–æ–≤–∞ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
        category = game.selected_category or random.choice(list(WORDS_DATABASE.keys()))
        difficulty = game.difficulty
        
        words_list = WORDS_DATABASE.get(category, {}).get(difficulty, [])
        if not words_list:
            # –ï—Å–ª–∏ –Ω–µ—Ç —Å–ª–æ–≤, –±–µ—Ä—ë–º –∏–∑ easy
            words_list = WORDS_DATABASE.get(category, {}).get("easy", [("—Å–ª–æ–≤–æ", "–∫–∞—Ç–µ–≥–æ—Ä–∏—è")])
        
        word_data = random.choice(words_list)
        game.secret_word, game.secret_category = word_data
        
        game.spy_id = random.choice(list(game.players.keys()))
        
        for player_id, player in game.players.items():
            if player_id == game.spy_id:
                player.is_spy = True
                player.word = "???"
                player.category = game.secret_category
            else:
                player.is_spy = False
                player.word = game.secret_word
                player.category = game.secret_category
        
        game.turn_order = list(game.players.keys())
        random.shuffle(game.turn_order)
        game.current_player_index = 0
        game.state = GameState.SHOWING_WORDS
        game.descriptions_done = []
        return game
    
    def get_game_by_user(self, user_id: int) -> Optional[GameRoom]:
        chat_id = self.user_games.get(user_id)
        if chat_id:
            return self.games.get(chat_id)
        return None

game_manager = GameManager()

# ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================

bot = Bot(token=BOT_TOKEN)
dp = Dispatcher()

# ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================

def format_lobby_text(game: GameRoom):
    text = f"üéÆ <b>–õ–æ–±–±–∏ –∏–≥—Ä—ã '–®–ø–∏–æ–Ω'</b>\n\n"
    text += f"üëë –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä: {game.host_name}\n\n"
    text += "üë• <b>–ò–≥—Ä–æ–∫–∏:</b>\n"
    
    for i, (pid, p) in enumerate(game.players.items(), 1):
        mark = "üëë " if pid == game.host_id else ""
        text += f"{i}. {mark}{p.full_name}\n"
    
    text += f"\nüìä –í—Å–µ–≥–æ: {len(game.players)} –∏–≥—Ä–æ–∫–æ–≤\n"
    
    if len(game.players) < 3:
        text += "\n‚ö†Ô∏è –ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 3 –∏–≥—Ä–æ–∫–∞!"
    else:
        text += "\n‚úÖ –ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å!"
    
    return text

def make_lobby_keyboard(chat_id: int, players_count: int):
    buttons = []
    buttons.append([InlineKeyboardButton(text="‚úÖ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è", callback_data=f"join_{chat_id}")])
    
    if players_count >= 3:
        buttons.append([InlineKeyboardButton(text="üöÄ –ù–ê–ß–ê–¢–¨ –ò–ì–†–£", callback_data=f"start_{chat_id}")])
    
    buttons.append([InlineKeyboardButton(text="‚ùå –í—ã–π—Ç–∏", callback_data=f"leave_{chat_id}")])
    
    return InlineKeyboardMarkup(inline_keyboard=buttons)

def get_category_keyboard(chat_id: int):
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"""
    buttons = []
    # –î–µ–ª–∞–µ–º –ø–æ 2 –∫–Ω–æ–ø–∫–∏ –≤ —Ä—è–¥
    categories = list(CATEGORIES.items())
    for i in range(0, len(categories), 2):
        row = []
        for key, name in categories[i:i+2]:
            row.append(InlineKeyboardButton(text=name, callback_data=f"cat_{key}_{chat_id}"))
        buttons.append(row)
    
    return InlineKeyboardMarkup(inline_keyboard=buttons)

def get_difficulty_keyboard(chat_id: int, category: str):
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤—ã–±–æ—Ä–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"""
    return InlineKeyboardMarkup(inline_keyboard=[
        [
            InlineKeyboardButton(text="üü¢ –õ–µ–≥–∫–æ", callback_data=f"diff_easy_{category}_{chat_id}"),
            InlineKeyboardButton(text="üü° –°—Ä–µ–¥–Ω–µ", callback_data=f"diff_medium_{category}_{chat_id}"),
            InlineKeyboardButton(text="üî¥ –°–ª–æ–∂–Ω–æ", callback_data=f"diff_hard_{category}_{chat_id}")
        ],
        [InlineKeyboardButton(text="‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º", callback_data=f"back_cat_{chat_id}")]
    ])

def get_show_word_keyboard(chat_id: int):
    return InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="üéØ –ü–æ–∫–∞–∑–∞—Ç—å –º–æ—ë —Å–ª–æ–≤–æ", callback_data=f"myword_{chat_id}")],
    ])

def get_game_menu_keyboard(chat_id: int):
    return InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="üó≥ –ù–∞—á–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ", callback_data=f"startvote_{chat_id}")],
    ])

def get_vote_keyboard(game: GameRoom, voter_id: int):
    buttons = []
    for pid, player in game.players.items():
        if pid != voter_id and not player.has_voted:
            votes = player.votes_received
            vote_text = f"üë§ {player.full_name}" + (f" ({votes}üëé)" if votes > 0 else "")
            buttons.append([InlineKeyboardButton(text=vote_text, callback_data=f"vote_{game.chat_id}_{pid}_{voter_id}")])
    
    if not buttons:
        return None
    return InlineKeyboardMarkup(inline_keyboard=buttons)

# ==================== –ö–û–ú–ê–ù–î–´ ====================

@dp.message(Command("start"))
async def cmd_start(message: types.Message):
    await message.answer(
        "üïµÔ∏è <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ '–®–ø–∏–æ–Ω'!</b>\n\n"
        "–î–æ–±–∞–≤—å –º–µ–Ω—è –≤ –≥—Ä—É–ø–ø—É –∏ –Ω–∞–ø–∏—à–∏ /game",
        parse_mode=ParseMode.HTML
    )

@dp.message(Command("game"))
async def cmd_game(message: types.Message):
    chat_id = message.chat.id
    user = message.from_user
    
    if message.chat.type == "private":
        await message.answer("‚ùå –¢–æ–ª—å–∫–æ –≤ –≥—Ä—É–ø–ø–∞—Ö!")
        return
    
    if chat_id in game_manager.games:
        del game_manager.games[chat_id]
    
    game = game_manager.create_game(
        chat_id=chat_id,
        host_id=user.id,
        host_name=user.full_name,
        username=user.username or user.full_name
    )
    
    await message.answer(
        format_lobby_text(game),
        parse_mode=ParseMode.HTML,
        reply_markup=make_lobby_keyboard(chat_id, len(game.players))
    )

@dp.message(Command("rules"))
async def cmd_rules(message: types.Message):
    await message.answer("""
üìú <b>–ü–†–ê–í–ò–õ–ê:</b>
‚Ä¢ –í—ã–±–∏—Ä–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å
‚Ä¢ –ù–∞–∂–º–∏ "–ü–æ–∫–∞–∑–∞—Ç—å –º–æ—ë —Å–ª–æ–≤–æ" ‚Äî —É–≤–∏–¥–∏—à—å —Å–ª–æ–≤–æ –¢–û–õ–¨–ö–û –¢–´
‚Ä¢ –û–ø–∏—Å—ã–≤–∞–π —Å–ª–æ–≤–æ –ø–æ –æ—á–µ—Ä–µ–¥–∏
‚Ä¢ –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∫–æ–≥–¥–∞ –∑–∞—Ö–æ—á–µ—Ç
‚Ä¢ –ì–æ–ª–æ—Å—É–µ–º –∫—Ç–æ —à–ø–∏–æ–Ω
‚Ä¢ –®–ø–∏–æ–Ω —É–≥–∞–¥—ã–≤–∞–µ—Ç —Å–ª–æ–≤–æ –µ—Å–ª–∏ –ø–æ–π–º–∞–Ω
""", parse_mode=ParseMode.HTML)

@dp.message(Command("vote"))
async def cmd_vote(message: types.Message):
    chat_id = message.chat.id
    user = message.from_user
    
    game = game_manager.games.get(chat_id)
    if not game or game.state != GameState.PLAYING:
        await message.answer("‚ùå –ò–≥—Ä–∞ –Ω–µ –∏–¥—ë—Ç!")
        return
    
    if user.id != game.host_id:
        await message.answer(f"‚ùå –¢–æ–ª—å–∫–æ {game.host_name} –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ!")
        return
    
    await start_voting(chat_id, game)

# ==================== CALLBACK ====================

@dp.callback_query(F.data.startswith("join_"))
async def cb_join(callback: types.CallbackQuery):
    user = callback.from_user
    chat_id = int(callback.data.split("_")[1])
    
    game = game_manager.games.get(chat_id)
    if not game:
        await callback.answer("–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!", show_alert=True)
        return
    
    if user.id in game.players:
        await callback.answer("–¢—ã —É–∂–µ –≤ –∏–≥—Ä–µ!", show_alert=True)
        return
    
    success = game_manager.join_game(
        chat_id=chat_id,
        user_id=user.id,
        full_name=user.full_name,
        username=user.username or user.full_name
    )
    
    if not success:
        await callback.answer("–ù–µ —É–¥–∞–ª–æ—Å—å!", show_alert=True)
        return
    
    await callback.answer(f"‚úÖ {user.full_name} –≤ –∏–≥—Ä–µ!")
    
    try:
        await callback.message.edit_text(
            format_lobby_text(game),
            parse_mode=ParseMode.HTML,
            reply_markup=make_lobby_keyboard(chat_id, len(game.players))
        )
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞: {e}")

@dp.callback_query(F.data.startswith("leave_"))
async def cb_leave(callback: types.CallbackQuery):
    user = callback.from_user
    chat_id = int(callback.data.split("_")[1])
    
    game = game_manager.games.get(chat_id)
    if not game or user.id not in game.players:
        await callback.answer("–¢—ã –Ω–µ –≤ –∏–≥—Ä–µ!", show_alert=True)
        return
    
    game_manager.leave_game(chat_id, user.id)
    await callback.answer("üëã –¢—ã –≤—ã—à–µ–ª")
    
    if not game.players:
        try:
            await callback.message.delete()
        except:
            pass
        return
    
    try:
        await callback.message.edit_text(
            format_lobby_text(game),
            parse_mode=ParseMode.HTML,
            reply_markup=make_lobby_keyboard(chat_id, len(game.players))
        )
    except:
        pass

@dp.callback_query(F.data.startswith("start_"))
async def cb_start(callback: types.CallbackQuery):
    user = callback.from_user
    chat_id = int(callback.data.split("_")[1])
    
    game = game_manager.games.get(chat_id)
    if not game:
        await callback.answer("–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!", show_alert=True)
        return
    
    if user.id != game.host_id:
        await callback.answer(f"‚ùå –¢–æ–ª—å–∫–æ {game.host_name} –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å!", show_alert=True)
        return
    
    if len(game.players) < 3:
        await callback.answer("–ù—É–∂–Ω–æ 3 –∏–≥—Ä–æ–∫–∞!", show_alert=True)
        return
    
    # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≤—ã–±–æ—Ä—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    game.state = GameState.SELECTING_CATEGORY
    
    await callback.message.edit_text(
        "üéÆ <b>–í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</b>\n\n"
        "–í—ã–±–µ—Ä–∏ —Ç–µ–º—É –¥–ª—è –∏–≥—Ä—ã:\n"
        "‚Ä¢ üçî –ï–¥–∞\n"
        "‚Ä¢ üêæ –ñ–∏–≤–æ—Ç–Ω—ã–µ\n"
        "‚Ä¢ üìç –ú–µ—Å—Ç–∞\n"
        "‚Ä¢ üíº –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏\n"
        "‚Ä¢ üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç\n"
        "‚Ä¢ üéÆ –ë—Ä–∞–≤–ª –°—Ç–∞—Ä—Å\n"
        "‚Ä¢ ‚öîÔ∏è –ö–ª–µ—à –†–æ—è–ª—å\n"
        "‚Ä¢ ‚öΩ –§—É—Ç–±–æ–ª\n"
        "‚Ä¢ üèÜ –°–ø–æ—Ä—Ç\n"
        "‚Ä¢ üì± –¢–µ—Ö–Ω–∏–∫–∞\n"
        "‚Ä¢ üéµ –ú—É–∑—ã–∫–∞\n"
        "‚Ä¢ üé¨ –ö–∏–Ω–æ\n\n"
        "üëá –ù–∞–∂–º–∏ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:",
        parse_mode=ParseMode.HTML,
        reply_markup=get_category_keyboard(chat_id)
    )

@dp.callback_query(F.data.startswith("cat_"))
async def cb_category(callback: types.CallbackQuery):
    """–í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"""
    data = callback.data.split("_")
    category = data[1]
    chat_id = int(data[2])
    
    game = game_manager.games.get(chat_id)
    if not game:
        await callback.answer("–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!", show_alert=True)
        return
    
    if callback.from_user.id != game.host_id:
        await callback.answer(f"‚ùå –¢–æ–ª—å–∫–æ {game.host_name} –≤—ã–±–∏—Ä–∞–µ—Ç!", show_alert=True)
        return
    
    game.selected_category = category
    game.state = GameState.SELECTING_DIFFICULTY
    
    category_name = CATEGORIES.get(category, category)
    
    await callback.message.edit_text(
        f"üéÆ <b>–ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category_name}</b>\n\n"
        f"–¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å:\n"
        f"üü¢ –õ–µ–≥–∫–æ ‚Äî –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Å–ª–æ–≤–∞\n"
        f"üü° –°—Ä–µ–¥–Ω–µ ‚Äî –º–µ–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ\n"
        f"üî¥ –°–ª–æ–∂–Ω–æ ‚Äî —Ä–µ–¥–∫–∏–µ —Å–ª–æ–≤–∞\n\n"
        f"üëá –í—ã–±–µ—Ä–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å:",
        parse_mode=ParseMode.HTML,
        reply_markup=get_difficulty_keyboard(chat_id, category)
    )

@dp.callback_query(F.data.startswith("back_cat_"))
async def cb_back_category(callback: types.CallbackQuery):
    """–ù–∞–∑–∞–¥ –∫ –≤—ã–±–æ—Ä—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"""
    chat_id = int(callback.data.split("_")[2])
    
    game = game_manager.games.get(chat_id)
    if not game:
        await callback.answer("–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!", show_alert=True)
        return
    
    if callback.from_user.id != game.host_id:
        await callback.answer(f"‚ùå –¢–æ–ª—å–∫–æ {game.host_name} –≤—ã–±–∏—Ä–∞–µ—Ç!", show_alert=True)
        return
    
    game.state = GameState.SELECTING_CATEGORY
    game.selected_category = None
    
    await callback.message.edit_text(
        "üéÆ <b>–í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</b>\n\n"
        "–í—ã–±–µ—Ä–∏ —Ç–µ–º—É –¥–ª—è –∏–≥—Ä—ã:\n\n"
        "üëá –ù–∞–∂–º–∏ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:",
        parse_mode=ParseMode.HTML,
        reply_markup=get_category_keyboard(chat_id)
    )

@dp.callback_query(F.data.startswith("diff_"))
async def cb_difficulty(callback: types.CallbackQuery):
    """–í—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∞—Ä—Ç –∏–≥—Ä—ã"""
    data = callback.data.split("_")
    difficulty = data[1]
    category = data[2]
    chat_id = int(data[3])
    
    game = game_manager.games.get(chat_id)
    if not game:
        await callback.answer("–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!", show_alert=True)
        return
    
    if callback.from_user.id != game.host_id:
        await callback.answer(f"‚ùå –¢–æ–ª—å–∫–æ {game.host_name} –≤—ã–±–∏—Ä–∞–µ—Ç!", show_alert=True)
        return
    
    game.difficulty = difficulty
    game.selected_category = category
    game = game_manager.start_game(chat_id)
    
    if not game:
        await callback.message.edit_text("‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞")
        return
    
    category_name = CATEGORIES.get(game.selected_category, game.selected_category)
    difficulty_emoji = {"easy": "üü¢", "medium": "üü°", "hard": "üî¥"}.get(game.difficulty, "üü°")
    difficulty_text = {"easy": "–õ–µ–≥–∫–æ", "medium": "–°—Ä–µ–¥–Ω–µ", "hard": "–°–ª–æ–∂–Ω–æ"}.get(game.difficulty, "–°—Ä–µ–¥–Ω–µ")
    
    await callback.message.edit_text(
        f"üöÄ <b>–ò–ì–†–ê –ù–ê–ß–ê–õ–ê–°–¨!</b>\n\n"
        f"üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: <b>{category_name}</b>\n"
        f"üìä –°–ª–æ–∂–Ω–æ—Å—Ç—å: {difficulty_emoji} {difficulty_text}\n"
        f"üë• –ò–≥—Ä–æ–∫–æ–≤: {len(game.players)}\n\n"
        f"üéØ <b>–ö–∞–∂–¥—ã–π –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–≤–æ—ë —Å–ª–æ–≤–æ!</b>\n"
        f"üëÄ <i>–¢–æ–ª—å–∫–æ —Ç—ã —É–≤–∏–¥–∏—à—å —Å–≤–æ—ë —Å–ª–æ–≤–æ —á–µ—Ä–µ–∑ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ!</i>\n\n"
        f"üó≥ –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä: –Ω–∞–∂–º–∏ üó≥ –∫–æ–≥–¥–∞ –∑–∞—Ö–æ—á–µ—à—å –Ω–∞—á–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ\n\n"
        f"‚û°Ô∏è –û–ø–∏—Å—ã–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–º: <b>{game.players[game.turn_order[0]].full_name}</b>",
        parse_mode=ParseMode.HTML,
        reply_markup=get_show_word_keyboard(chat_id)
    )

@dp.callback_query(F.data.startswith("myword_"))
async def cb_my_word(callback: types.CallbackQuery):
    user = callback.from_user
    chat_id = int(callback.data.split("_")[1])
    
    game = game_manager.games.get(chat_id)
    if not game:
        await callback.answer("–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!", show_alert=True)
        return
    
    if user.id not in game.players:
        await callback.answer("–¢—ã –Ω–µ –≤ –∏–≥—Ä–µ!", show_alert=True)
        return
    
    player = game.players[user.id]
    
    if player.is_spy:
        await callback.answer(
            f"üïµÔ∏è‚Äç‚ôÇÔ∏è –¢–´ –®–ü–ò–û–ù! –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {player.category}. –°–ª–æ–≤–∞ –Ω–µ –∑–Ω–∞–µ—à—å!",
            show_alert=True
        )
    else:
        await callback.answer(
            f"üéØ –¢–≤–æ—ë —Å–ª–æ–≤–æ: {player.word}! –ù–µ –≤—ã–¥–∞–π —à–ø–∏–æ–Ω—É!",
            show_alert=True
        )

@dp.callback_query(F.data.startswith("startvote_"))
async def cb_start_vote(callback: types.CallbackQuery):
    user = callback.from_user
    chat_id = int(callback.data.split("_")[1])
    
    game = game_manager.games.get(chat_id)
    if not game or game.state not in [GameState.PLAYING, GameState.SHOWING_WORDS]:
        await callback.answer("–ò–≥—Ä–∞ –Ω–µ –∏–¥—ë—Ç!", show_alert=True)
        return
    
    if user.id != game.host_id:
        await callback.answer(f"‚ùå –¢–æ–ª—å–∫–æ {game.host_name} –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å!", show_alert=True)
        return
    
    await callback.answer("–ù–∞—á–∏–Ω–∞–µ–º –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ!")
    await start_voting(chat_id, game)

# ==================== –ò–ì–†–û–í–û–ô –ü–†–û–¶–ï–°–° ====================

@dp.message(F.chat.type.in_(["group", "supergroup"]))
async def handle_group_msg(message: types.Message):
    chat_id = message.chat.id
    user_id = message.from_user.id
    
    game = game_manager.games.get(chat_id)
    if not game:
        return
    
    if user_id not in game.players:
        return
    
    if game.state in [GameState.PLAYING, GameState.SHOWING_WORDS]:
        if game.state == GameState.SHOWING_WORDS:
            game.state = GameState.PLAYING
        
        if user_id in game.descriptions_done:
            return
        
        game.descriptions_done.append(user_id)
        player = game.players[user_id]
        player.description = message.text
        logger.info(f"{player.full_name}: {message.text}")
        
        if len(game.descriptions_done) >= len(game.players):
            await message.reply(
                "‚úÖ –í—Å–µ –æ–ø–∏—Å–∞–ª–∏ —Å–ª–æ–≤–æ!\n"
                "üó≥ –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π /vote –∏–ª–∏ –∫–Ω–æ–ø–∫–æ–π",
                parse_mode=ParseMode.HTML,
                reply_markup=get_game_menu_keyboard(chat_id)
            )
        else:
            game.current_player_index = (game.current_player_index + 1) % len(game.turn_order)
            next_id = game.turn_order[game.current_player_index]
            next_p = game.players[next_id]
            
            await message.reply(
                f"‚úÖ {player.full_name} –æ–ø–∏—Å–∞–ª.\n\n"
                f"‚û°Ô∏è –°–ª–µ–¥—É—é—â–∏–π: {next_p.full_name}",
                parse_mode=ParseMode.HTML
            )
    
    elif game.state == GameState.SPY_GUESS:
        if user_id != game.spy_id:
            return
        
        text = message.text.lower().strip()
        correct = game.secret_word.lower()
        
        if text == correct or text in correct or correct in text:
            await message.reply(f"‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –°–ª–æ–≤–æ: {game.secret_word}")
            await end_game(game, "spy", f"–®–ø–∏–æ–Ω —É–≥–∞–¥–∞–ª: '{game.secret_word}'!")
        else:
            await message.reply(f"‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ë—ã–ª–æ: {game.secret_word}")
            await end_game(game, "citizens", f"–®–ø–∏–æ–Ω –Ω–µ —É–≥–∞–¥–∞–ª (—Å–∫–∞–∑–∞–ª '{text}')")

async def start_voting(chat_id: int, game: GameRoom):
    game.state = GameState.VOTING
    
    desc = "üìù <b>–û–ü–ò–°–ê–ù–ò–Ø:</b>\n\n"
    for pid in game.players:
        p = game.players[pid]
        if p.description:
            desc += f"{p.full_name}: {p.description}\n"
    
    msg = await bot.send_message(
        chat_id,
        f"{desc}\nüó≥ <b>–ì–û–õ–û–°–û–í–ê–ù–ò–ï!</b>\n–ö—Ç–æ —à–ø–∏–æ–Ω? –ù–∞–∂–º–∏ –Ω–∞ –∏–º—è:",
        parse_mode=ParseMode.HTML
    )
    
    for pid in game.players:
        keyboard = get_vote_keyboard(game, pid)
        if keyboard:
            try:
                await bot.send_message(
                    chat_id,
                    f"üó≥ <b>{game.players[pid].full_name}</b>, –∑–∞ –∫–æ–≥–æ –≥–æ–ª–æ—Å—É–µ—à—å?",
                    parse_mode=ParseMode.HTML,
                    reply_markup=keyboard
                )
            except Exception as e:
                logger.error(f"–û—à–∏–±–∫–∞: {e}")

@dp.callback_query(F.data.startswith("vote_"))
async def cb_vote(callback: types.CallbackQuery):
    data = callback.data.split("_")
    chat_id = int(data[1])
    target_id = int(data[2])
    voter_id = int(data[3])
    
    if callback.from_user.id != voter_id:
        await callback.answer("‚ùå –≠—Ç–æ –Ω–µ —Ç–≤–æ—è –∫–Ω–æ–ø–∫–∞!", show_alert=True)
        return
    
    game = game_manager.games.get(chat_id)
    if not game or game.state != GameState.VOTING:
        await callback.answer("–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –æ–∫–æ–Ω—á–µ–Ω–æ!", show_alert=True)
        return
    
    if game.players[voter_id].has_voted:
        await callback.answer("–¢—ã —É–∂–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª!", show_alert=True)
        return
    
    game.votes[voter_id] = target_id
    game.players[voter_id].has_voted = True
    game.players[target_id].votes_received += 1
    
    await callback.answer(f"‚úÖ –ü—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª –ø—Ä–æ—Ç–∏–≤ {game.players[target_id].full_name}!")
    
    try:
        await callback.message.delete()
    except:
        pass
    
    voted_count = sum(1 for p in game.players.values() if p.has_voted)
    
    await bot.send_message(
        chat_id,
        f"üó≥ {game.players[voter_id].full_name} –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª! ({voted_count}/{len(game.players)})",
        parse_mode=ParseMode.HTML
    )
    
    if voted_count >= len(game.players):
        await end_voting(game)

async def end_voting(game: GameRoom):
    max_votes = -1
    suspects = []
    
    for pid, p in game.players.items():
        if p.votes_received > max_votes:
            max_votes = p.votes_received
            suspects = [pid]
        elif p.votes_received == max_votes:
            suspects.append(pid)
    
    suspected_id = random.choice(suspects)
    suspected = game.players[suspected_id]
    
    if suspected.is_spy:
        game.state = GameState.SPY_GUESS
        await bot.send_message(
            game.chat_id,
            f"üéØ <b>{suspected.full_name}</b> –≤—ã–≥–Ω–∞–Ω!\nüïµÔ∏è‚Äç‚ôÇÔ∏è –≠—Ç–æ –®–ü–ò–û–ù!\n\n"
            f"üïµÔ∏è‚Äç‚ôÇÔ∏è <b>{suspected.full_name}</b>, –Ω–∞–ø–∏—à–∏ –≤ —á–∞—Ç —Å–ª–æ–≤–æ –∫–æ—Ç–æ—Ä–æ–µ –¥—É–º–∞–µ—à—å!\n"
            f"üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {game.secret_category}",
            parse_mode=ParseMode.HTML
        )
    else:
        spy = game.players[game.spy_id]
        await end_game(game, "spy", f"–û—à–∏–±–∫–∞! {suspected.full_name} –Ω–µ —à–ø–∏–æ–Ω. –®–ø–∏–æ–Ω –±—ã–ª {spy.full_name}")

async def end_game(game: GameRoom, winner: str, reason: str):
    game.state = GameState.FINISHED
    spy = game.players[game.spy_id]
    
    category_name = CATEGORIES.get(game.selected_category, game.selected_category)
    
    result = f"üèÅ <b>–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê!</b>\n\n"
    result += f"üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category_name}\n"
    result += f"üïµÔ∏è‚Äç‚ôÇÔ∏è –®–ø–∏–æ–Ω: {spy.full_name}\n"
    result += f"üéØ –°–ª–æ–≤–æ: {game.secret_word}\n\n"
    result += f"üèÜ {'–ü–û–ë–ï–î–ê –®–ü–ò–û–ù–ê!' if winner == 'spy' else '–ü–û–ë–ï–î–ê –ú–ò–†–ù–´–•!'}\n"
    result += f"üìã {reason}"
    
    await bot.send_message(game.chat_id, result, parse_mode=ParseMode.HTML)
    
    for pid in list(game.players.keys()):
        if pid in game_manager.user_games:
            del game_manager.user_games[pid]
    if game.chat_id in game_manager.games:
        del game_manager.games[game.chat_id]

# ==================== –ó–ê–ü–£–°–ö ====================

async def main():
    logger.info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!")
    await bot.delete_webhook(drop_pending_updates=True)
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())